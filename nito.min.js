/*! nito v0.1.0 - https://github.com/morris/nito */
!function(t){"undefined"!=typeof module?module.exports=t:t($,window)}(function(t,e){var n=t.extend;n(t,{nito:function(e){var n=e.idProp||"id",i=e.base;t.isArray(i)&&(i=i.join("\n")),delete e.idProp,delete e.base;var r=function(e,n,i){t.Comp.call(this,e,n,i)};return r.prototype=Object.create(t.Comp.prototype),t.extend(r.prototype,e),t.extend(r,t.Comp),r.base=i,r.idProp=n,r},router:function(n,i){var r=n._router?n:function(){var t=e.location.href.split("#")[1]||"",r=t.split("/").filter(function(t){return""!==t});n.apply(i,r)};return r._router=!0,t(e).on("hashchange",r),r(),r},routerOff:function(n){t(e).off("hashchange",n)}}),t.Comp=function(e,n,i){this.$el=t(e).data("comp",this),this.data=n||{},this.parent=i,this.setup(),this.update(this.data)},n(t.Comp,{create:function(t,e){return this.setup(this.base,t,e)},setup:function(t,e,n){return new this(t,e,n)},appendTo:function(t,e,n){var i=this.create(e,n);return i.$el.appendTo(t),i},remove:function(t){t.$el.remove()}}),n(t.Comp.prototype,{setup:function(){},update:function(){},on:function(t,e){var n=this,i=Array.prototype.map.call(arguments,function(t){return"function"==typeof t?t.bind(n):t});return this.$el.on.apply(this.$el,i),this},find:function(){return this.$el.find.apply(this.$el,arguments)}}),n(t.fn,{nest:function(t,e,n){return this.loop([t],e,n)},loop:function(e,n,i){var r=n.idProp||"id",o=n.remove.bind(n)||function(t){t.$el.remove()},a="_childMap",u=t(this),p={};e=e.filter(function(t){if(!t)return!1;var e=t[r];if(!e)throw new Error('Undefined id "'+r+'" in loop');if(p[e])throw new Error('Non-distinct id "'+e+'" in loop');return p[e]=t,!0});var c=u.data(a)||{};t.each(c,function(t,e){p[t]||(o(e),delete c[t])});var s=0,f=e.map(function(t){var e=t[r],o=c[e],a=!o;a&&(o=n.create(t,i),c[e]=o),o.update(t);var p=o.$el;return s>=u.children().length?(p.appendTo(u),p.trigger("moved")):(a||p.index()!==s)&&(0===s?p.prependTo(u):p.insertAfter(u.children().eq(s-1)),p.trigger("moved")),++s,o});return u.data(a,c),f},classes:function(e){return this.each(function(){var n=t(this);t.each(e,function(t,e){n.hasClass(t)?e||n.removeClass(t):e&&n.addClass(t)})})},weld:function(e,n){if(null===e||"object"!=typeof e)return e+="",this.each(function(){var n=t(this),i=n.html();i!==e&&n.html(e)});n=n||{};var i=this;return t.each(e,function(t,e){var r=n[t]||"#"+t+", ."+t;i.find(r).not("input, textarea, select").weld(e)}),this},fill:function(e,n){var i=this;return t.each(e,function(e,r){if(n&&(e=n+"["+e+"]"),r&&"object"==typeof r)return i.fill(r,e);var o;t.isArray(r)?(o=i.find('[name="'+e+'[]"]'),o.is("input[type=checkbox]")?o.each(function(){t(this).prop("checked",r.indexOf(t(this).attr("value"))>=0)}):o.is("select[multiple]")&&o.find("option").each(function(){t(this).prop("selected",r.indexOf(t(this).attr("value"))>=0)})):(o=i.find('[name="'+e+'"]'),o.is("input[type=text], input[type=password], select, textarea")?o.val(r):o.is("input[type=radio]")?o.each(function(){t(this).prop("checked",t(this).attr("value")===r)}):o.is("input[type=checkbox]")&&("string"==typeof r&&(r=!!parseInt(r)),o.prop("checked",r)))}),this}})});