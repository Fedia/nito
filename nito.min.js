/*! Nito v0.8.0 - https://github.com/morris/nito */
!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:t(e,e.$)}(this,function(e,t){function i(e,t){return"function"==typeof e?e.call(t):e}if(!t.nito){var n=t.extend,a=t.isArray,r=t.each;t.nito=function(e){var i=function(e,i,n){t.Comp.call(this,e,i,n)};i.prototype=Object.create(t.Comp.prototype),n(i.prototype,e),n(i,t.Comp);var r=e.base;return i.base=t(a(r)?r.join("\n"):r)[0],i.identify=e.identify,i},t.Comp=function(e,i,n){this.$el=t(e).eq(0),this.el=this.$el[0],this.setup(i,n),this.update(i,n)},n(t.Comp,{appendTo:function(e,t,i){var n=this.create(t,i);return n.$el.appendTo(e),n},create:function(e,t){return this.setup(this.base?this.base.cloneNode(!0):null,e,t)},setup:function(e,t,i){return new this(e,t,i)}}),n(t.Comp.prototype,{setup:function(){},update:function(){},on:function(e,t){var i=this,n=[].map.call(arguments,function(e){return"function"==typeof e?e.bind(i):e});return this.$el.on.apply(this.$el,n),this},find:function(){return this.$el.find.apply(this.$el,arguments)}}),n(t.fn,{loop:function(e,t,i){var n=this[0];if(n){var a=n.children,r=n.nitoMap=n.nitoMap||{},s=t.identify,o=0,u=e.map(function(e){var n=s?s(e):o+1;if(!n)throw new Error("Invalid key in loop");var a=r[n];return a?(a._sort=Math.abs(o-a._index),a.update(e,i)):(a=t.create(e,i),r[n]=a,a._sort=-o),a._index=o,a.el.nitoKeep=!0,a.el.nitoKey=n,++o,a});for(o=0;o<a.length;){var c=a[o];c.nitoKeep?++o:(n.removeChild(c),delete r[c.nitoKey])}return u.slice(0).sort(function(e,t){return t._sort-e._sort||t._index-e._index}).forEach(function(e){var t=e.el,i=a[e._index];i?t!==i&&n.insertBefore(t,i):n.appendChild(t),t.nitoKeep=!1}),u}},nest:function(e,t,i){return e?this.loop([e],t,i)[0]:void this.loop([],t,i)},classes:function(e){return this.each(function(){var n=this,a=t(n);r(e,function(e,t){a.toggleClass(e,!!i(t,n))})})},weld:function(e,t){if((null===e||void 0===e)&&(e=""),"object"!=typeof e)return this.each(function(){var t=i(e,this)+"";switch(this.tagName){case"INPUT":case"TEXTAREA":case"SELECT":break;case"IMG":this.src!==t&&(this.src=t);break;default:(this.nitoHTML||this.innerHTML)!==t&&(this.innerHTML=this.nitoHTML=t)}});t=t||{};var n=this;return r(e,function(e,i){var a=t[e]||"."+e;n.find(a).weld(i)}),this},values:function(e,i){function n(e){return e.replace(/\]/g,"").split(/\[/g)}function r(e){return e.match(/^\d+$/)?parseInt(e,10):e}var s=this.filter("[name]").add(this.find("[name]"));if(void 0===e)return e={},s.serializeArray().forEach(function(t){for(var i=n(t.name),a=i[0],s=e,o=0,u=i.length-1;u>o;++o){var c=i[o];a=i[o+1];var h=a.match(/^\d*$/)?[]:{};s=s[c]=s[c]||h}""===a?s.push(t.value):s[r(a)]=t.value}),e;var o="value",u="checked",c="selected";return i&&(o="defaultValue",u="defaultChecked",c="defaultSelected"),s.each(function(){var s=e;n(this.name).forEach(function(e){s&&""!==e&&(s=s[r(e)])});var h=t(this),l=this.tagName,f="INPUT"===l?this.type:l;switch((void 0===s||null===s)&&(s=""),f){case"SELECT":var d=this.multiple&&a(s);h.children().each(function(){this[c]=d?s.indexOf(this.getAttribute("value"))>=0:s==this.getAttribute("value")});break;case"TEXTAREA":this[o]=s+"",i&&h.html(s+"");break;case"radio":this[u]=s==this.getAttribute("value");break;case"checkbox":this[u]=a(s)?s.indexOf(this.getAttribute("value"))>=0:!!s;break;case"button":case"file":case"image":case"reset":case"submit":break;default:this[o]=s+""}}),this},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":"checkbox"===this.type||"radio"===this.type?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":t(this).children().reset()}}),this}})}});