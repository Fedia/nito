/*! Nito v0.8.0 - https://github.com/morris/nito */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:e(t,t.$)}(this,function(t,e){function i(t,e){return"function"==typeof t?t.call(e):t}if(!e.nito){var n=e.extend,o=e.isArray,r=e.each;e.nito=function(t){var i=t.keyProp||"key",r=t.identify||function(t){return t[i]},s=t.base;s=e(o(s)?s.join("\n"):s)[0];var a=function(t,i,n){e.Comp.call(this,t,i,n)};return a.prototype=Object.create(e.Comp.prototype),n(a.prototype,t),n(a,e.Comp),a.base=s,a.identify=r,a},e.Comp=function(t,i,n){this.$el=e(t).eq(0),this.el=this.$el[0],this.el&&(this.el.nitoComp=this),this.setup(i,n),this.update(i,n)},n(e.Comp,{create:function(t,e){return this.setup(this.base?this.base.cloneNode(!0):null,t,e)},setup:function(t,e,i){return new this(t,e,i)},appendTo:function(t,e,i){var n=this.create(e,i);return n.$el.appendTo(t),n}}),n(e.Comp.prototype,{setup:function(){},update:function(){},on:function(t,e){var i=this,n=[].map.call(arguments,function(t){return"function"==typeof t?t.bind(i):t});return this.$el.on.apply(this.$el,n),this},find:function(){return this.$el.find.apply(this.$el,arguments)}}),n(e.fn,{loop:function(t,e,i){var n=e.identify||function(t){return t.key},o=this[0],r=o.children,s=o.nitoCompMap=o.nitoCompMap||{},a=0,u=t.map(function(t){var o=n(t);if(!o)throw new Error("Undefined key in loop");var r=s[o];return r?r._sort=Math.abs(a-r._index):(r=e.create(t,i),s[o]=r,r._sort=-a),r._index=a,r.el.nitoKeep=!0,r.el.nitoKey=o,r.update(t,i),++a,r});for(a=0;a<r.length;){var c=r[a];c.nitoKeep?++a:(o.removeChild(c),delete s[c.nitoKey])}return u.slice(0).sort(function(t,e){return e._sort-t._sort||e._index-t._index}).forEach(function(t){var e=t.el,i=r[t._index];i?e!==i&&o.insertBefore(e,i):o.appendChild(e),e.nitoKeep=!1}),u},nest:function(t,e,i){return t?this.loop([t],e,i)[0]:void this.loop([],e,i)},classes:function(t){return this.each(function(){var n=this,o=e(n);r(t,function(t,e){o.toggleClass(t,!!i(e,n))})})},weld:function(t,e){if((null===t||void 0===t)&&(t=""),"object"!=typeof t)return this.each(function(){var e=i(t,this)+"";switch(this.tagName){case"INPUT":case"TEXTAREA":case"SELECT":break;case"IMG":this.src!==e&&(this.src=e);break;default:(this.nitoHTML||this.innerHTML)!==e&&(this.innerHTML=this.nitoHTML=e)}});e=e||{};var n=this;return r(t,function(t,i){var o=e[t]||"."+t;n.find(o).weld(i)}),this},values:function(t,i,n){if(!t)return this;var s=this,a="value",u="checked",c="selected";return i&&(a="defaultValue",u="defaultChecked",c="defaultSelected"),r(t,function(t,r){n&&(t=n+"["+t+"]");var h;if(o(r))h=s.find('[name="'+t+'[]"]'),h.each(function(){"checkbox"===this.type?this[u]=r.indexOf(this.getAttribute("value"))>=0:this.multiple&&e(this).children().each(function(){this[c]=r.indexOf(this.getAttribute("value"))>=0})});else{if(r&&"object"==typeof r)return s.values(r,i,t);if(h=s.find('[name="'+t+'"]'),0===h.length)return this;var f=h[0],l=f.tagName,d=f.type;(void 0===r||null===r)&&(r=""),"SELECT"===l?h.children().each(function(){this[c]=r==this.getAttribute("value")}):"radio"===d?h.each(function(){this[u]=r==this.getAttribute("value")}):"checkbox"===d?f[u]=!!r:"button"!==d&&"file"!==d&&"image"!==d&&"reset"!==d&&"submit"!==d?f[a]=r+"":"TEXTAREA"===l&&(f[a]=r+"",i&&h.html(r+""))}}),this},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":var t=this.type;"checkbox"===t||"radio"===t?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":e(this).children().reset()}}),this}})}});