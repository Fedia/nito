/*! Nito v0.8.0 - https://github.com/morris/nito */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:e(t,t.$)}(this,function(t,e){function i(t,e){return"function"==typeof t?t.call(e):t}if(!e.nito){var n=e.extend,r=e.isArray,a=e.each;e.nito=function(t){var i=function(t,i,n){e.Comp.call(this,t,i,n)};i.prototype=Object.create(e.Comp.prototype),n(i.prototype,t),n(i,e.Comp);var a=t.base;return i.base=e(r(a)?a.join("\n"):a)[0],i.identify=t.identify,i},e.Comp=function(t,i,n){this.$el=e(t).eq(0),this.el=this.$el[0],this.setup(i,n),this.update(i,n)},n(e.Comp,{appendTo:function(t,e,i){var n=this.create(e,i);return n.$el.appendTo(t),n},create:function(t,e){return this.setup(this.base?this.base.cloneNode(!0):null,t,e)},setup:function(t,e,i){return new this(t,e,i)}}),n(e.Comp.prototype,{setup:function(){},update:function(){},on:function(t,e){var i=this,n=[].map.call(arguments,function(t){return"function"==typeof t?t.bind(i):t});return this.$el.on.apply(this.$el,n),this},find:function(){return this.$el.find.apply(this.$el,arguments)}}),n(e.fn,{loop:function(t,e,i){var n=this[0];if(n){var r=n.children,a=n.nitoMap=n.nitoMap||{},s=e.identify,o=0,u=t.map(function(t){var n=s?s(t):o+1;if(!n)throw new Error("Invalid key in loop");var r=a[n];return r?(r._sort=Math.abs(o-r._index),r.update(t,i)):(r=e.create(t,i),a[n]=r,r._sort=-o),r._index=o,r.el.nitoKeep=!0,r.el.nitoKey=n,++o,r});for(o=0;o<r.length;){var h=r[o];h.nitoKeep?++o:(n.removeChild(h),delete a[h.nitoKey])}return u.slice(0).sort(function(t,e){return e._sort-t._sort||e._index-t._index}).forEach(function(t){var e=t.el,i=r[t._index];i?e!==i&&n.insertBefore(e,i):n.appendChild(e),e.nitoKeep=!1}),u}},nest:function(t,e,i){return t?this.loop([t],e,i)[0]:void this.loop([],e,i)},classes:function(t){return this.each(function(){var n=this,r=e(n);a(t,function(t,e){r.toggleClass(t,!!i(e,n))})})},weld:function(t,e){if((null===t||void 0===t)&&(t=""),"object"!=typeof t)return this.each(function(){var e=i(t,this)+"";switch(this.tagName){case"INPUT":case"TEXTAREA":case"SELECT":break;case"IMG":this.src!==e&&(this.src=e);break;default:(this.nitoHTML||this.innerHTML)!==e&&(this.innerHTML=this.nitoHTML=e)}});e=e||{};var n=this;return a(t,function(t,i){var r=e[t]||"."+t;n.find(r).weld(i)}),this},values:function(t,i){function n(t){return t.replace(/\]/g,"").split(/\[/g)}function a(t){return t.match(/^\d+$/)?parseInt(t):t}var s=this.filter("[name]").add(this.find("[name]"));if(void 0===t)return t={},s.serializeArray().forEach(function(e){for(var i=n(e.name),r=i[0],s=t,o=0,u=i.length-1;u>o;++o){var h=i[o];r=i[o+1];var c=r.match(/^\d*$/)?[]:{};s=s[h]=s[h]||c}""===r?s.push(e.value):s[a(r)]=e.value}),t;var o="value",u="checked",h="selected";return i&&(o="defaultValue",u="defaultChecked",h="defaultSelected"),s.each(function(){var s=t;n(this.name).forEach(function(t){s&&""!==t&&(s=s[a(t)])});var c=e(this),l=this.tagName,f=this.type;r(s)?"checkbox"===f?this[u]=s.indexOf(this.getAttribute("value"))>=0:this.multiple&&c.children().each(function(){this[h]=s.indexOf(this.getAttribute("value"))>=0}):((void 0===s||null===s)&&(s=""),"SELECT"===l?c.children().each(function(){this[h]=s==this.getAttribute("value")}):"radio"===f?this[u]=s==this.getAttribute("value"):"checkbox"===f?this[u]=!!s:"TEXTAREA"===l?(this[o]=s+"",i&&c.html(s+"")):"button"!==f&&"file"!==f&&"image"!==f&&"reset"!==f&&"submit"!==f&&(this[o]=s+""))}),this},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":var t=this.type;"checkbox"===t||"radio"===t?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":e(this).children().reset()}}),this}})}});