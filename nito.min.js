/*! Nito v0.5.0 - https://github.com/morris/nito */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:e(t,t.$)}(this,function(t,e){function n(t,e){return"function"==typeof t?t.call(e):t}function i(t,e,n){t[e]!==n&&(t[e]=n)}if(!e.nito){var r=e.extend,o=e.isArray,u=e.each;r(e,{nito:function(t){var n=t.idProp||"id",i=t.base;o(i)&&(i=i.join("\n"));var u=function(t,n,i){e.Comp.call(this,t,n,i)};return u.prototype=Object.create(e.Comp.prototype),r(u.prototype,t),r(u,e.Comp),u.base=i,u.idProp=n,u}}),e.Comp=function(t,n,i){this.$el=e(t),this.$el.length>0&&(this.$el[0].nitoComp=this),this.setup(n,i),this.update(n,i)},r(e.Comp,{create:function(t,e){return this.setup(this.base,t,e)},setup:function(t,e,n){return new this(t,e,n)},appendTo:function(t,e,n){var i=this.create(e,n);return i.$el.appendTo(t),i},remove:function(t){t.$el.remove()}}),r(e.Comp.prototype,{setup:function(){},update:function(){},on:function(t,e){var n=this,i=[].map.call(arguments,function(t){return"function"==typeof t?t.bind(n):t});return this.$el.on.apply(this.$el,i),this},find:function(){return this.$el.find.apply(this.$el,arguments)}}),r(e.fn,{nest:function(t,e,n){return this.loop([t],e,n)[0]},loop:function(t,e,n){var i=e.idProp||"id",r=e.remove.bind(e)||function(t){t.$el.remove()},o=this.eq(0),s=this[0],a={};t=t.filter(function(t){if(!t)return!1;var e=t[i];if(!e)throw new Error('Undefined id "'+i+'" in loop');if(a[e])throw new Error('Non-distinct id "'+e+'" in loop');return a[e]=t,!0});var c=s.nitoChildMap||{};u(c,function(t,e){a[t]||(r(e),delete c[t])});var h=0,f=t.map(function(t){var r=t[i],u=c[r],s=!u;s&&(u=e.create(t,n),c[r]=u),u.update(t,n);var a=u.$el;return h>=o.children().length?(a.appendTo(o),a.trigger("moved")):(s||a.index()!==h)&&(0===h?a.prependTo(o):a.insertAfter(o.children().eq(h-1)),a.trigger("moved")),++h,u});return s.nitoChildMap=c,f},classes:function(t){return this.each(function(){var i=this,r=e(i);u(t,function(t,e){r.toggleClass(t,n(e,i))})})},style:function(t){return this.each(function(){var i=this,r=e(i);u(t,function(t,e){e=n(e,i),r.css(t)!==e&&r.css(t,e)})})},attrs:function(t){return this.each(function(){var i=this,r=e(i);u(t,function(t,e){e=n(e,i),r.attr(t)!==e&&r.attr(t,e)})})},weld:function(t,i){if((null===t||"undefined"==typeof t)&&(t=""),"object"!=typeof t)return this.each(function(){var i=n(t,this)+"",r=e(this),o=r.html();o!==i&&r.html(i)});i=i||{};var r=this;return u(t,function(t,e){var n=i[t]||"#"+t+", ."+t;r.find(n).not("input, textarea, select").weld(e)}),this},fill:function(t,n,r){if(!t)return this;var s=this,a="defaultValue",c="defaultChecked",h="defaultSelected";return n&&(a="value",c="checked",h="selected"),u(t,function(t,u){r&&(t=r+"["+t+"]");var f;if(o(u))f=s.find('[name="'+t+'[]"]'),f.each(function(){"checkbox"===this.type?i(this,c,u.indexOf(this.getAttribute("value"))>=0):this.multiple&&e(this).children().each(function(){i(this,h,u.indexOf(this.getAttribute("value"))>=0)})});else{if(u&&"object"==typeof u)return s.fill(u,n,t);if(f=s.find('[name="'+t+'"]'),0===f.length)return this;var l=f[0],d=l.tagName,p=l.type;"SELECT"===d?f.find("option").each(function(){i(this,h,u===this.getAttribute("value"))}):"radio"===p?f.each(function(){i(this,c,u===this.getAttribute("value"))}):"checkbox"===p?l[c]=u:"text"===p||"password"===p||"hidden"===p?i(l,a,u):"TEXTAREA"===d&&(i(l,a,u),n||f.html(u))}}),this},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":var t=this.type;"checkbox"===t||"radio"===t?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":e(this).find("option").reset()}}),this}})}});